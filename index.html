<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gestión de Gastos</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Gestión de Gastos</h1>
  </header>
  <main>
    <form id="expense-form">
      <input type="text" id="expense-description" placeholder="Descripción" required>
      <input type="number" id="expense-amount" placeholder="Monto" required>
      <select id="expense-category">
        <option value="comida">Comida</option>
        <option value="transporte">Transporte</option>
        <option value="entretenimiento">Entretenimiento</option>
        <!-- Agrega más opciones de categorías según sea necesario -->
      </select>
      <button type="submit">Agregar Gasto</button>
    </form>
    <div>
      <label for="filter-category">Filtrar por Categoría:</label>
      <select id="filter-category">
        <option value="all">Todas</option>
        <option value="comida">Comida</option>
        <option value="transporte">Transporte</option>
        <option value="entretenimiento">Entretenimiento</option>
        <!-- Agrega más opciones de categorías aquí -->
      </select>
    </div>
    <div id="expense-list">
      <!-- Aquí se mostrarán los gastos agregados -->
    </div>
    <div id="total-expenses">
      Total: $0.00
    </div>
    <div id="expense-count">
      Número de Gastos: 0
    </div>
  </main>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const expenseForm = document.getElementById('expense-form');
      const expenseList = document.getElementById('expense-list');
      const totalExpenses = document.getElementById('total-expenses');
      const filterSelect = document.getElementById('filter-category');
      let total = 0;
      let expenseCount = 0;

      // Función para crear un elemento de gasto
      function createExpenseItem(description, amount, category, date) {
        const expenseItem = document.createElement('div');
        expenseItem.classList.add('expense-item');
        expenseItem.innerHTML = `<p>${description} - $${amount.toFixed(2)} - ${category} - ${date} <button class="edit-btn">Editar</button> <button class="delete-btn">Eliminar</button></p>`;
        return expenseItem;
      }

      expenseForm.addEventListener('submit', function(event) {
        event.preventDefault();

        const description = document.getElementById('expense-description').value;
        const amount = parseFloat(document.getElementById('expense-amount').value);
        const category = document.getElementById('expense-category').value;

        if (description && !isNaN(amount)) {
          const currentDate = new Date();
          const formattedDate = `${currentDate.getDate()}/${currentDate.getMonth() + 1}/${currentDate.getFullYear()}`;
          
          const expenseItem = createExpenseItem(description, amount, category, formattedDate);
          expenseList.appendChild(expenseItem);

          total += amount;
          totalExpenses.textContent = `Total: $${total.toFixed(2)}`;

          expenseCount++;
          const expenseCountElement = document.getElementById('expense-count');
          expenseCountElement.textContent = `Número de Gastos: ${expenseCount}`;

          document.getElementById('expense-description').value = '';
          document.getElementById('expense-amount').value = '';
        }
      });

      expenseList.addEventListener('click', function(event) {
        if (event.target.classList.contains('delete-btn')) {
          const expenseItem = event.target.parentElement;
          const amountString = expenseItem.textContent.match(/\d+\.\d{2}/);
          const amount = parseFloat(amountString);
          total -= amount;
          totalExpenses.textContent = `Total: $${total.toFixed(2)}`;
          expenseItem.remove();

          expenseCount--;
          const expenseCountElement = document.getElementById('expense-count');
          expenseCountElement.textContent = `Número de Gastos: ${expenseCount}`;
        } else if (event.target.classList.contains('edit-btn')) {
          const expenseItem = event.target.parentElement;
          const expenseDetails = expenseItem.textContent.split(' - '); 

          const description = expenseDetails[0];
          const amount = parseFloat(expenseDetails[1].replace('$', ''));
          const category = expenseDetails[2];
          const date = expenseDetails[3];

          // Aquí puedes implementar la lógica para editar el gasto
          // Podrías abrir un modal o un formulario prellenado con los detalles para editar
          // ...
        }
      });

      filterSelect.addEventListener('change', function(event) {
        const selectedCategory = event.target.value;
        const expenses = document.querySelectorAll('.expense-item');
        
        expenses.forEach(expense => {
          if (selectedCategory === 'all' || expense.textContent.includes(selectedCategory)) {
            expense.style.display = 'block';
          } else {
            expense.style.display = 'none';
          }
        });
      });
    });
  </script>
</body>
</html>


