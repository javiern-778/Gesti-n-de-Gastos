<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gestión de Gastos</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Gestión de Gastos</h1>
  </header>
  <main>
    <form id="expense-form">
      <input type="text" id="expense-description" placeholder="Descripción" required>
      <input type="number" id="expense-amount" placeholder="Monto" required>
      <select id="expense-category">
        <option value="all">Todas</option>
        <option value="Salud y Cuidado Personal">Salud y Cuidado Personal</option>
        <option value="Educación">Educación</option>
        <option value="Deudas y Finanzas">Deudas y Finanzas</option>
        <option value="Ropa y Accesorios">Ropa y Accesorios</option>
        <option value="Misceláneos">Misceláneos</option>
        <option value="transporte">Transporte</option>
        <option value="entretenimiento">Entretenimiento</option>
        <option value="vivienda">Vivienda</option>
        <option value="alimentacion">Alimentación</option>
        <!-- Agrega más opciones según necesites -->
      </select>
      <button type="submit">Agregar Gasto</button>
    </form>
    
    <div id="expense-list">
      <!-- Aquí se mostrarán los gastos agregados -->
    </div>
    <div id="total-expenses">
      Total: $0.00
    </div>
  </main>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const expenseForm = document.getElementById('expense-form');
      const expenseList = document.getElementById('expense-list');
      const totalExpenses = document.getElementById('total-expenses');
      let total = 0;
      let editing = false;
      let editedExpense;

      expenseForm.addEventListener('submit', function(event) {
        event.preventDefault();

        const description = document.getElementById('expense-description').value;
        const amount = parseFloat(document.getElementById('expense-amount').value);
        const category = document.getElementById('expense-category').value;
        const date = new Date();

        if (description && !isNaN(amount)) {
          if (editing) {
            // Si está en modo edición, actualiza el gasto existente
            editedExpense.firstChild.textContent = `${description} - $${amount.toFixed(2)} - ${category} - ${date.toLocaleString()}`;
            totalExpenses.textContent = `Total: $${total.toFixed(2)}`;
            editing = false;
          } else {
            const expenseItem = createExpenseItem(description, amount, category, date);
            expenseList.appendChild(expenseItem);
            total += amount;
            totalExpenses.textContent = `Total: $${total.toFixed(2)}`;
          }

          document.getElementById('expense-description').value = '';
          document.getElementById('expense-amount').value = '';
        }
      });

      function createExpenseItem(description, amount, category, date) {
        const expenseItem = document.createElement('div');
        expenseItem.classList.add('expense-item');

        const deleteButton = document.createElement('button');
        deleteButton.textContent = 'Eliminar';
        deleteButton.classList.add('delete-btn');

        const editButton = document.createElement('button');
        editButton.textContent = 'Editar';
        editButton.classList.add('edit-btn');

        expenseItem.innerHTML = `<p>${description} - $${amount.toFixed(2)} - ${category} - ${date.toLocaleString()}</p>`;
        expenseItem.appendChild(deleteButton);
        expenseItem.appendChild(editButton);

        deleteButton.addEventListener('click', function() {
          expenseItem.remove();
          total -= amount;
          totalExpenses.textContent = `Total: $${total.toFixed(2)}`;
        });

        editButton.addEventListener('click', function() {
          // Lógica para editar el gasto
          // Prellenar el formulario con los detalles actuales del gasto para editarlos
          editing = true;
          editedExpense = expenseItem;
          const expenseDetails = expenseItem.firstChild.textContent.split(' - ');
          document.getElementById('expense-description').value = expenseDetails[0];
          document.getElementById('expense-amount').value = parseFloat(expenseDetails[1].replace('$', ''));
          document.getElementById('expense-category').value = expenseDetails[2];
        });

        return expenseItem;
      }
    });
  </script>
</body>
</html>
